function goodMessage(e,t){Swal.fire({title:e,html:'<p style="text-align: left;">'+t+"</p>",icon:"success",allowOutsideClick:!1,confirmButtonText:"OK",confirmButtonColor:"#FF4274",showClass:{popup:`
      animate__animated
      animate__fadeInRight
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutLeft
      animate__faster
    `}})}function badMessage(e,t){Swal.fire({title:e,html:'<p style="text-align: left;">'+t+"</p>",icon:"error",allowOutsideClick:!1,confirmButtonText:"OK",confirmButtonColor:"#FF4274",showClass:{popup:`
      animate__animated
      animate__fadeInRight
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutLeft
      animate__faster
    `}})}function warningMessage(e,t){Swal.fire({title:e,html:'<p style="text-align: left;">'+t+"</p>",icon:"warning",allowOutsideClick:!1,confirmButtonText:"OK",confirmButtonColor:"#FF4274",showClass:{popup:`
      animate__animated
      animate__fadeInRight
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutLeft
      animate__faster
    `}})}function badMessageCenter(e,t){Swal.fire({title:e,html:t,icon:"error",allowOutsideClick:!1,confirmButtonText:"OK",confirmButtonColor:"#FF4274",showClass:{popup:`
      animate__animated
      animate__fadeInRight
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutLeft
      animate__faster
    `}})}function setImage(e,t){let i=e.getElementsByTagName("img")[0];i||(i=document.createElement("img"),e.appendChild(i)),!1===i.src.endsWith(t)&&(i.src=t)}function setImageWidth(e,t,i){let n=e.getElementsByTagName("img")[0];n||(n=document.createElement("img"),e.appendChild(n)),!1===n.src.endsWith(t)&&(n.src=t),n.width!==i&&(n.width=i)}function setImageHW(e,t,i,n){let o=e.getElementsByTagName("img")[0];o||(o=document.createElement("img"),e.appendChild(o)),!1===o.src.endsWith(t)&&(o.src=t),o.width!==n&&(o.width=n),o.height!==i&&(o.height=i)}function setText(e,t){e.innerHTML!=="<nobr>"+t+"</nobr>"&&(e.innerHTML="<nobr>"+t+"</nobr>")}function setText2(e,t){e.innerHTML!==t&&(e.innerHTML=t)}function Remove(e){""!==e.innerHTML&&(e.innerHTML="")}function putXY(e,t,i){"no"!==t&&(e.style.left=t),"no"!==i&&(e.style.top=i)}const Center="-50%",Left="0%",Top=Left,Right="-100%",Bottom=Right;function translate(e,t,i){e.style.transform="translate("+t+", "+i+") rotate(0deg) scale(100%)"}function transform(e,t,i,n,o){e.style.transform="translate("+t+", "+i+") rotate("+n+"deg) scale("+o+"%)"}function transform2(e,t,i,n,o,a){e.style.transform="translate("+t+", "+i+") rotate("+n+"deg) scaleX("+o+"%) scaleY("+a+"%)"}function Rb(e,t){return"<ruby>"+e+"<rt>"+t+"</rt></ruby>"}function fontSet(e,t,i,n,o,a){"green"==t?t="#BFFFB0":"blue"==t?t="#AFD0FF":"red"==t&&(t="#FFC6BB"),e.style.color!==t&&(e.style.color=t),e.style.fontFamily!==i&&(e.style.fontFamily=i),e.style.fontSize!==n&&(e.style.fontSize=n),e.style.fontWeight!==o&&(e.style.fontWeight=o),e.style.textAlign!==a&&(e.style.textAlign=a)}function fontColorSet(e,t){"green"==t?t="#BFFFB0":"blue"==t?t="#AFD0FF":"red"==t&&(t="#FFC6BB"),e.style.color!==t&&(e.style.color=t)}function textEdge(e,i,n){if(0!=i){var o=[];for(let e=1;e<=i;e++)o[e]=Math.sqrt(e);"green"==n?n="#17890B":"blue"==n?n="#012DD4":"red"==n&&(n="#CE2807");let t="";for(let e=1;e<=i;e++)t+=e+"px 0px 0px "+n+", "+-e+"px 0px 0px "+n+", 0px "+e+"px 0px "+n+", 0px "+-e+"px 0px "+n+",";for(let e=1;e<=i;e++)e!=i?t+=o[e]+"px "+o[e]+"px 0px "+n+", "+-o[e]+"px "+o[e]+"px 0px "+n+", "+o[e]+"px "+-o[e]+"px 0px "+n+", "+-o[e]+"px "+-o[e]+"px 0px "+n+",":t+=o[e]+"px "+o[e]+"px 0px "+n+", "+-o[e]+"px "+o[e]+"px 0px "+n+", "+o[e]+"px "+-o[e]+"px 0px "+n+", "+-o[e]+"px "+-o[e]+"px 0px "+n;e.style.textShadow!==t&&(e.style.textShadow=t)}else 0==i&&""!==e.style.textShadow&&(e.style.textShadow="")}let allDiv=[];function defaultSet(e,t){t.appendChild(e),allDiv.push(e),e.style.position="absolute"}let phone;function phoneCheck(){phone=!!navigator.userAgent.match(/iPhone|Android.+Mobile/)}phoneCheck();let lastVec={};function Vector(e,t,i,n){i-=e,e=n-t,n=i*i+e*e;0==(n=Math.sqrt(n))?(lastVec.x=0,lastVec.y=1,lastVec.z=1):(lastVec.x=i/n,lastVec.y=e/n,lastVec.z=n)}function Vector2(e,t,i,n){i-=e,e=n-t,n=i*i+e*e;0==(n=Math.sqrt(n))?(lastVec.x=0,lastVec.y=1,lastVec.z=1):(lastVec.x=i,lastVec.y=e,lastVec.z=n)}function Vector3(e,t,i,n){i-=e,e=n-t;let o;return Math.abs(e)>Math.abs(i)?o=0<=e?"down":"up":Math.abs(e)<Math.abs(i)?o=0<i?"right":"left":((o=[])[0]="diagonal",o[1]=0<=e?"down":"up",o[2]=0<i?"right":"left"),o}function touchElement(e,t){var i=[];let n=!1,o=!1,a=!1;return i[1]=e.getBoundingClientRect(),i[2]=t.getBoundingClientRect(),i[1].top<i[2].top&&(i[2]=e.getBoundingClientRect(),i[1]=t.getBoundingClientRect()),i[2].bottom>i[1].top&&(n=!0),i[1]=e.getBoundingClientRect(),i[2]=t.getBoundingClientRect(),i[2].left<i[1].left&&(i[2]=e.getBoundingClientRect(),i[1]=t.getBoundingClientRect()),i[1].right>i[2].left&&(o=!0),a=1==o&&1==n}function touchElement2(e,t){var i=[],n=touchElement(e,t);let o=!1;i[1]=e.getBoundingClientRect(),i[2]=t.getBoundingClientRect();e=[];return e[1]={},e[2]={},1==n&&(e[1].y=(i[1].top+i[1].bottom)/2,e[2].y=(i[2].top+i[2].bottom)/2,e[1].x=(i[1].left+i[1].right)/2,e[2].x=(i[2].left+i[2].right)/2,o=Vector3(e[2].x,e[2].y,e[1].x,e[1].y)),o}function arrayCopy(e){return JSON.parse(JSON.stringify(e))}function resizeImage(e,o){const a=new Image;a.src=e,a.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=600,e.height=450,t.drawImage(a,0,0,600,450);let i=e.toDataURL("image/"+o,1);var n=.75*i.length/1048576;return puzzleSRC=(1<=n&&(t.clearRect(0,0,600,450),e.width=960*(n=1/n*(5/8)),e.height=720*n,t.drawImage(a,0,0,960*n,720*n),i=e.toDataURL("image/"+o,1)),i),!0}}function loadImage(){var e=document.createElement("input");e.type="file",0==cheatOK()?e.accept="image/jpeg, image/png":e.accept="image/jpeg, image/png, image/gif",e.multiple=!1,e.onchange=function(e){let i=e.target.files[0],n=i.name.split(".").pop().toLowerCase();-1===["jpeg","jpg","png"].indexOf(n)&&0==cheatOK()?badMessageCenter("ロードエラー！","jpg、png以外は選択できません。"):-1===["jpeg","jpg","png","gif"].indexOf(n)?badMessageCenter("ロードエラー！","jpg、png、gif以外は選択できません。"):((e=new FileReader).onload=function(e){var e=e.target.result,t=(i.size/1048576).toFixed(2);8<=t?badMessage("ロードエラー！","画像ファイルのサイズが約"+t+"MBです。<br>8MB以上の画像データは使用できません。"):"gif"==n?1.6<=t?badMessage("ロードエラー！","gifファイルのサイズが約"+t+"MBです。<br>1.6MB以上のgifは使用できません。"):(puzzleSRC=e,q=0):0!=resizeImage(e,n)&&(q=0)},e.readAsDataURL(i))},e.click()}function touch(e,t){let i=0;e.addEventListener("touchstart",function(e){return e.preventDefault,i=1,0==skipMode&&t(),!1}),e.addEventListener("mousedown",function(e){return e.preventDefault,0===i&&0==skipMode&&t(),i=0,!1})}function isHTTP(){var e=window.location.href;return new RegExp("^(http://|https://)").test(e)}let puzzleTime=0,startTime=0,latestTime=0;function performanceTime(){let e=latestTime-startTime;return e=e<=0||NaN===e?0:(e/=fps2,Math.round(e))}function second(){let e=Math.floor(performanceTime()/fps);return e=(e%=60)<10?"0"+e:e}function minute(){let e=Math.floor(performanceTime()/fps);return(e=Math.floor(e/60))<10?e="0"+e:100<=e&&(e=99),e}function miniTime(){var e=performanceTime()%fps;return Math.floor(e/(fps/10))}function timeDisplay(){return minute()+":"+second()+"."+miniTime()}function timeDisplay2(){let e=Math.floor(performanceTime()/fps);return 100==(e=100<=(e=Math.floor(e/60))?100:e)?"100分以上":"00"==minute()?second()+"秒"+miniTime():minute()+"分"+second()+"秒"+miniTime()}function victoryTime(){var e=Math.floor(performanceTime()/fps),t=Math.floor(e/60);let i=!1;e%=60;return i=2==t&&0==miniTime()&&0==e||t<2?!0:i}const shareURL="https://ramunespark.github.io/puzzleMaker/";function shareContent(e,t){navigator.share&&navigator.share({title:e,url:t}).then(()=>{}).catch(console.error)}function taittsuNormalShare(){let e="ラムネのパズルメーカー | スライドパズルを作って遊べる！\n#ラムネのパズルメーカー\n"+shareURL;e=encodeURIComponent(e),setTimeout(()=>{window.open("https://taittsuu.com/share?text="+e,"_blank")},300)}function twitterNormalShare(){let e="ラムネのパズルメーカー | スライドパズルを作って遊べる！\n#ラムネのパズルメーカー\n"+shareURL;e=encodeURIComponent(e),setTimeout(()=>{window.open("https://twitter.com/intent/tweet?text="+e,"_blank")},300)}function taittsuClearShare(){if("complete2"==mode||"complete2"==sinceMode){let e=recordShare2();e=encodeURIComponent(e),setTimeout(()=>{window.open("https://taittsuu.com/share?text="+e,"_blank")},300)}}function twitterClearShare(){if("complete2"==mode||"complete2"==sinceMode){let e=recordShare2();e=encodeURIComponent(e),setTimeout(()=>{window.open("https://twitter.com/intent/tweet?text="+e,"_blank")},300)}}function recordShare(){var e=pSize+"×"+pSize;let t;t=0==judge?"カラー判定なし":"カラー判定あり";let i;i=0==example?"お手本なし":"お手本あり";var n=timeDisplay2();return"["+e+"]["+t+"]["+i+"]\n"+["クリエイトパズル","パズルA","パズルB","パズルC","パズルD"][q]+"を"+n+"でクリアしました！"}function recordShare2(){return"ラムネのパズルメーカー | スライドパズルを作って遊べる！\n#ラムネのパズルメーカー\n\n"+recordShare()+"\n\n"+shareURL}function copyText(e){e=new Blob([e],{type:"text/plain"}),e=[new ClipboardItem({"text/plain":e})];navigator.clipboard.write(e).then(function(){},function(){})}const screenWidth=1080,screenHeight=2024;let screenLong,windowWidthBasic=(screenLong=screenWidth>=screenHeight?"width":"height",null),windowHeightBasic=null,windowWidth=window.innerWidth,windowHeight=window.innerHeight,ri=0,screenScale=40;const rotate_switch=["0","-90","-90"];let lastOrient=void 0;function monitorResize(){phoneCheck(),windowWidthBasic===window.innerWidth&&windowHeightBasic===window.innerHeight&&lastOrient===window.orientation||(screenSet(),setTimeout(()=>{screenSet()},1e3));var e=window.scrollX,t=window.scrollY;0===e&&0===t||window.scroll(0,0)}function screenSet(){windowWidth=window.innerWidth,windowHeight=window.innerHeight;var e=window.orientation;0==e||180==e||1!=phone?ri=0:90==e?(windowHeight=window.innerWidth,windowWidth=window.innerHeight,ri=1):270!=e&&-90!=e||(windowHeight=window.innerWidth,windowWidth=window.innerHeight,ri=2),screenScale=windowWidth/windowHeight>=screenWidth/screenHeight?windowHeight/screenHeight*100:windowWidth/screenWidth*100,screen.style.left="50%",screen.style.top="50%",transform(screen,Center,Center,rotate_switch[ri],screenScale),windowWidthBasic=window.innerWidth,windowHeightBasic=window.innerHeight,lastOrient=window.orientation}const screen=document.getElementById("screen");screen.style.opacity=1;let scene,nextScene=void 0,bs=-100,shift=0,change=0,change_level=.2,change_time=0;function blackout(){100==(bs=null!=nextScene&&100!=bs&&101!=bs&&-100!=bs?100:bs)?(change-=change_level)<=0&&(change=0,bs=101):101==bs?1<=++change_time&&(scene=nextScene,change_time=0,bs=-100,shift=0,RemoveAll()):-100==bs&&1<=(change+=change_level)&&(change=1,bs=0,nextScene=void 0),screen.style.opacity=change}const Player=5;let kPlayer=1,lrk=[],udk=[],k=[];const bt=["A","B","X","Y","Start","Select","L1","R1","L2","R2"];for(let e=0;e<bt.length;e++)k[bt[e]]=[];for(let t=1;t<=Player;t++){lrk[t]=!1,udk[t]=!1;for(let e=0;e<bt.length;e++)k[bt[e]][t]=!1}function key_down(e){}function key_up(e){}document.onkeydown=key_down,document.onkeyup=key_up;let connectedGamepadIndex=[null,null,null,null,null,null],loopID,pad=[null,null,null,null,null,null],padID=[null,null,null,null,null,null],Stick={L:{V:[],H:[]},R:{V:[],H:[]}};function kPlayCheck(){for(let e=1;e<=Player;e++)if(null==padID[e]){kPlayer=e;break}}addEventListener("gamepadconnected",e=>{}),addEventListener("gamepaddisconnected",e=>{});const BUTTON_A_INDEX=1,BUTTON_B_INDEX=0,BUTTON_X_INDEX=3,BUTTON_Y_INDEX=2,BUTTON_SELECT_INDEX=8,BUTTON_START_INDEX=9,BUTTON_UP_INDEX=12,BUTTON_DOWN_INDEX=13,BUTTON_LEFT_INDEX=14,BUTTON_RIGHT_INDEX=15,BUTTON_HOME_INDEX=16,BUTTON_L_INDEX=4,BUTTON_R_INDEX=5,BUTTON_ZL_INDEX=6,BUTTON_ZR_INDEX=7,AXIS_L_HORIZONTAL_INDEX=0,AXIS_L_VERTICAL_INDEX=1,AXIS_R_HORIZONTAL_INDEX=2,AXIS_R_VERTICAL_INDEX=3;function loop(){var t=navigator.getGamepads(),i=[];for(let e=0;e<4;e++)i[e]=t[e];var n={a:[],b:[],x:[],y:[],start:[],select:[],up:[],down:[],left:[],right:[],l:[],r:[],zl:[],zr:[]},o={L:{Horizontal:[],Vertical:[]},R:{Horizontal:[],Vertical:[]}};for(let e=1;e<=4;e++)null!==padID[e]&&gamepadInput(e,n,i,t,o);requestAnimationFrame(loop)}function keyReset(t){lrk[t]=!1,udk[t]=!1;for(let e=0;e<bt.length;e++)k[bt[e]][t]=!1}function gamepadInput(e,t,i,n,o){var a;"PCEngine PAD"==padID[e].slice(0,12)?(t.a[e]=i[e].buttons[BUTTON_A_INDEX],t.y[e]=i[e].buttons[BUTTON_Y_INDEX],t.start[e]=i[e].buttons[BUTTON_START_INDEX],t.select[e]=i[e].buttons[BUTTON_SELECT_INDEX],t.up[e]=i[e].buttons[BUTTON_UP_INDEX],t.down[e]=i[e].buttons[BUTTON_DOWN_INDEX],t.left[e]=i[e].buttons[BUTTON_LEFT_INDEX],t.right[e]=i[e].buttons[BUTTON_RIGHT_INDEX],1==t.y[e].value?k.A[e]=!0:k.A[e]=!1,1==t.a[e].value?k.B[e]=!0:k.B[e]=!1,1==t.start[e].value?k.Start[e]=!0:k.Start[e]=!1,1==t.select[e].value?k.Select[e]=!0:k.Select[e]=!1,3285==(a=Math.floor(1e3*i[e].axes[9]))&&(udk[e]=!1,lrk[e]=!1),-1e3==a&&(udk[e]="up",lrk[e]=!1),1e3==a&&(udk[e]="up",lrk[e]="left"),714==a&&(udk[e]=!1,lrk[e]="left"),428==a&&(udk[e]="down",lrk[e]="left"),142==a&&(udk[e]="down",lrk[e]=!1),-143==a&&(udk[e]="down",lrk[e]="right"),-429==a&&(udk[e]=!1,lrk[e]="right"),-715==a&&(udk[e]="up",lrk[e]="right")):(t.a[e]=i[e].buttons[BUTTON_A_INDEX],t.b[e]=i[e].buttons[BUTTON_B_INDEX],t.x[e]=i[e].buttons[BUTTON_X_INDEX],t.y[e]=i[e].buttons[BUTTON_Y_INDEX],t.start[e]=i[e].buttons[BUTTON_START_INDEX],t.select[e]=i[e].buttons[BUTTON_SELECT_INDEX],t.up[e]=i[e].buttons[BUTTON_UP_INDEX],t.down[e]=i[e].buttons[BUTTON_DOWN_INDEX],t.left[e]=i[e].buttons[BUTTON_LEFT_INDEX],t.right[e]=i[e].buttons[BUTTON_RIGHT_INDEX],t.l[e]=i[e].buttons[BUTTON_L_INDEX],t.r[e]=i[e].buttons[BUTTON_R_INDEX],t.zl[e]=i[e].buttons[BUTTON_ZL_INDEX],t.zr[e]=i[e].buttons[BUTTON_ZR_INDEX],o.L.Horizontal[e]=i[e].axes[AXIS_L_HORIZONTAL_INDEX],o.L.Vertical[e]=i[e].axes[AXIS_L_VERTICAL_INDEX],o.R.Horizontal[e]=i[e].axes[AXIS_R_HORIZONTAL_INDEX],o.R.Vertical[e]=i[e].axes[AXIS_R_VERTICAL_INDEX],1==t.a[e].value?k.A[e]=!0:k.A[e]=!1,1==t.b[e].value?k.B[e]=!0:k.B[e]=!1,1==t.x[e].value?k.X[e]=!0:k.X[e]=!1,1==t.y[e].value?k.Y[e]=!0:k.Y[e]=!1,1==t.start[e].value?k.Start[e]=!0:k.Start[e]=!1,1==t.select[e].value?k.Select[e]=!0:k.Select[e]=!1,1==t.l[e].value?k.L1[e]=!0:k.L1[e]=!1,1==t.r[e].value?k.R1[e]=!0:k.R1[e]=!1,1==t.zl[e].value?k.L2[e]=!0:k.L2[e]=!1,1==t.zr[e].value?k.R2[e]=!0:k.R2[e]=!1,1==t.left[e].value?lrk[e]="left":1==t.right[e].value?lrk[e]="right":lrk[e]=!1,1==t.up[e].value?udk[e]="up":1==t.down[e].value?udk[e]="down":udk[e]=!1,Stick.L.H[e]=Math.trunc(1e4*o.L.Horizontal[e]),Stick.L.V[e]=Math.trunc(1e4*o.L.Vertical[e]),Stick.R.H[e]=Math.trunc(1e4*o.R.Horizontal[e]),Stick.R.V[e]=Math.trunc(1e4*o.R.Vertical[e]))}let lCount=[],rCount=[],uCount=[],dCount=[],lm=[],rm=[],um=[],dm=[],lCount_1t=[],rCount_1t=[],uCount_1t=[],dCount_1t=[],lm_1t=[],rm_1t=[],um_1t=[],dm_1t=[],kCount=[],kCount_1t=[],km=[],km_1t=[];for(let e=0;e<bt.length;e++)kCount[bt[e]]=[],kCount_1t[bt[e]]=[],km[bt[e]]=[],km_1t[bt[e]]=[];for(let t=1;t<=Player;t++){lCount[t]=0,rCount[t]=0,uCount[t]=0,dCount[t]=0,lCount_1t[t]=0,rCount_1t[t]=0,uCount_1t[t]=0,dCount_1t[t]=0,lm[t]=!1,rm[t]=!1,um[t]=!1,dm[t]=!1,lm_1t[t]=!1,rm_1t[t]=!1,um_1t[t]=!1,dm_1t[t]=!1;for(let e=0;e<bt.length;e++)kCount[bt[e]][t]=0,kCount_1t[bt[e]][t]=0,km[bt[e]][t]=!1,km_1t[bt[e]][t]=!1}let k2ndTime=40,k3rdTime=8;function hold_down(){holdDownDpad(),holdDownButton()}function holdDownButton(){for(let t=1;t<=Player;t++)for(let e=0;e<bt.length;e++)kCount[bt[e]][t]>=k2ndTime&&(kCount[bt[e]][t]-=k3rdTime,kCount_1t[bt[e]][t]-=k3rdTime),1==k[bt[e]][t]?(kCount[bt[e]][t]++,kCount_1t[bt[e]][t]++):(kCount[bt[e]][t]=0,kCount_1t[bt[e]][t]=0),100!=bs&&101!=bs&&-100!=bs?(1==kCount[bt[e]][t]||kCount[bt[e]][t]==k2ndTime?km[bt[e]][t]=!0:km[bt[e]][t]=!1,1==kCount_1t[bt[e]][t]?km_1t[bt[e]][t]=!0:km_1t[bt[e]][t]=!1):(kCount[bt[e]][t]=0,km_1t[bt[e]][t]=!1)}function holdDownDpad(){for(let e=1;e<=Player;e++)lCount[e]>=k2ndTime&&(lCount[e]-=k3rdTime,lCount_1t[e]-=k3rdTime),"left"==lrk[e]?(lCount[e]++,lCount_1t[e]++):(lCount[e]=0,lCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==lCount[e]||lCount[e]==k2ndTime?lm[e]=!0:lm[e]=!1,1==lCount_1t[e]?lm_1t[e]=!0:lm_1t[e]=!1):(lCount[e]=0,lm_1t[e]=!1),rCount[e]>=k2ndTime&&(rCount[e]-=k3rdTime,rCount_1t[e]-=k3rdTime),"right"==lrk[e]?(rCount[e]++,rCount_1t[e]++):(rCount[e]=0,rCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==rCount[e]||rCount[e]==k2ndTime?rm[e]=!0:rm[e]=!1,1==rCount_1t[e]?rm_1t[e]=!0:rm_1t[e]=!1):(rCount[e]=0,rm_1t[e]=!1),dCount[e]>=k2ndTime&&(dCount[e]-=k3rdTime,dCount_1t[e]-=k3rdTime),"down"==udk[e]?(dCount[e]++,dCount_1t[e]++):(dCount[e]=0,dCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==dCount[e]||dCount[e]==k2ndTime?dm[e]=!0:dm[e]=!1,1==dCount_1t[e]?dm_1t[e]=!0:dm_1t[e]=!1):(dCount[e]=0,dm_1t[e]=!1),uCount[e]>=k2ndTime&&(uCount[e]-=k3rdTime,uCount_1t[e]-=k3rdTime),"up"==udk[e]?(uCount[e]++,uCount_1t[e]++):(uCount[e]=0,uCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==uCount[e]||uCount[e]==k2ndTime?um[e]=!0:um[e]=!1,1==uCount_1t[e]?um_1t[e]=!0:um_1t[e]=!1):(uCount[e]=0,um_1t[e]=!1)}let mouseX,mouseY,mouseC="no",dcy=(screen.addEventListener("mousedown",e=>{mouseC="click!"}),screen.addEventListener("mouseup",e=>{mouseC="no"}),screen.addEventListener("mousemove",e=>{e.preventDefault,mouseX=e.offsetX,mouseY=e.offsetY}),-300),dct=3e3,dco=0,div_controller=[];for(let e=1;e<=Player;e++)document.write("<div id= controller"+e+"> </div>"),div_controller[e]=document.getElementById("controller"+e),defaultSet(div_controller[e],screen),putXY(div_controller[e],100*e+800,dcy),translate(div_controller[e],Left,Top),div_controller[e].style.zIndex=1e9,div_controller[e].style.mixBlendMode="normal",setImage(div_controller[e],"");let div_controllerType=[];for(let e=1;e<=Player;e++)document.write("<div id= controllerType"+e+"> </div>"),div_controllerType[e]=document.getElementById("controllerType"+e),defaultSet(div_controllerType[e],screen),putXY(div_controllerType[e],100*e+800,dcy),translate(div_controllerType[e],Left,Top),div_controllerType[e].style.zIndex=1000000001,div_controllerType[e].style.mixBlendMode="normal",setImage(div_controllerType[e],"");function displayController(){0==dct&&(dcy=-300,dco=1),dct<3e3&&(dct++,dcy+=20),20<=dcy&&(dcy=20),220<dct&&(dco-=.1),dco<0&&(dct=3e3,dcy=-300,dco=0);for(let e=1;e<=Player;e++)3e3!=dct?(setImage(div_controller[e],"sys/"+e+"P.png"),e==kPlayer?setImage(div_controllerType[e],"sys/keyboard.png"):null!==padID[e]?setImage(div_controllerType[e],"sys/gamepad.png"):Remove(div_controllerType[e])):(Remove(div_controllerType[e]),Remove(div_controller[e])),putXY(div_controller[e],100*e+800,dcy),putXY(div_controllerType[e],100*e+800,dcy),div_controller[e].style.opacity=dco,div_controllerType[e].style.opacity=dco}const fps=50,fps2=1e3/fps;phoneCheck(),screenSet(),setTimeout(()=>{setInterval("move()",fps2)},50);let t=0;function move(){210<=++t&&(t=0),monitorResize(),run(),blackout()}nextScene="puzzle",scene=nextScene,change_level=.1,k2ndTime=40,k3rdTime=8,document.write("<div id= orientAlert> </div>");const div_orientAlert=document.getElementById("orientAlert");defaultSet(div_orientAlert,screen),putXY(div_orientAlert,"50%","50%"),translate(div_orientAlert,Center,Center),div_orientAlert.style.zIndex=1e10,setImage(div_orientAlert,"");let orientAlertOpacity=0;document.write("<div id= bg> </div>");const div_bg=document.getElementById("bg"),puzzleWidth=(defaultSet(div_bg,screen),putXY(div_bg,"50%","50%"),translate(div_bg,Center,Center),div_bg.style.zIndex=-100,setImage(div_bg,""),screenWidth/2),puzzleHeight=screenHeight/2+80,puzzleOrigin={x:puzzleWidth-480,y:puzzleHeight-360};let clear={x:-1e3};document.write("<div id= clear> </div>");const div_clear=document.getElementById("clear"),div_stage=(defaultSet(div_clear,screen),putXY(div_clear,puzzleWidth,puzzleHeight),translate(div_clear,Center,Center),div_clear.style.zIndex=18,setImage(div_clear,""),document.write("<div id= stage> </div>"),document.getElementById("stage")),div_stage2=(defaultSet(div_stage,screen),putXY(div_stage,puzzleWidth,puzzleHeight),translate(div_stage,Center,Center),div_stage.style.zIndex=10,div_stage.style.imageRendering="pixelated",setImage(div_stage,""),document.write("<div id= stage2> </div>"),document.getElementById("stage2")),div_puzzle=(defaultSet(div_stage2,screen),putXY(div_stage2,puzzleWidth,puzzleHeight),translate(div_stage2,Center,Center),div_stage2.style.zIndex=19,setImage(div_stage2,""),document.write("<div id= puzzle> </div>"),document.getElementById("puzzle")),div_giveUp=(defaultSet(div_puzzle,screen),putXY(div_puzzle,puzzleWidth,puzzleHeight),translate(div_puzzle,Center,Center),div_puzzle.style.zIndex=20,setImage(div_puzzle,""),document.write("<div id= giveUp> </div>"),document.getElementById("giveUp"));defaultSet(div_giveUp,screen),putXY(div_giveUp,puzzleWidth,puzzleHeight),translate(div_giveUp,Center,Center),div_giveUp.style.zIndex=2e4,setImage(div_giveUp,"");let giveUpDisOpacity=0,panels=[],div_panels=[];for(let t=0;t<5;t++){panels[t]=[],div_panels[t]=[];for(let e=0;e<5;e++)document.write("<div id= panels"+t+"_"+e+"> </div>"),panels[t][e]={x:1200,y:0},div_panels[t][e]=document.getElementById("panels"+t+"_"+e),putXY(div_panels[t][e],0,0),defaultSet(div_panels[t][e],screen),div_panels[t][e].style.zIndex=100,div_panels[t][e].style.overflow="hidden",div_panels[t][e].style.mixBlendMode="normal",setImage(div_panels[t][e],"")}function panelsClear(){for(let t=0;t<5;t++)for(let e=0;e<5;e++)Remove(div_panels[t][e]),div_panels[t][e].style.opacity=1}let div_panelsFrame=[];for(let t=0;t<5;t++){div_panelsFrame[t]=[];for(let e=0;e<5;e++)document.write("<div id= panelsFrame"+t+"_"+e+"> </div>"),div_panelsFrame[t][e]=document.getElementById("panelsFrame"+t+"_"+e),defaultSet(div_panelsFrame[t][e],screen),putXY(div_panelsFrame[t][e],"50%","50%"),translate(div_panelsFrame[t][e],Center,Center),div_panelsFrame[t][e].style.zIndex=110,div_panelsFrame[t][e].style.opacity=.8,div_panelsFrame[t][e].style.mixBlendMode="normal",setImage(div_panelsFrame[t][e],"")}let div_panelsArt=[];for(let t=0;t<5;t++){div_panelsArt[t]=[];for(let e=0;e<5;e++)document.write("<div id= panelsArt"+t+"_"+e+"> </div>"),div_panelsArt[t][e]=document.getElementById("panelsArt"+t+"_"+e),defaultSet(div_panelsArt[t][e],screen),putXY(div_panelsArt[t][e],0,0),translate(div_panelsArt[t][e],Left,Top),div_panelsArt[t][e].style.zIndex=105,div_panelsArt[t][e].style.mixBlendMode="normal",setImage(div_panelsArt[t][e],"")}let div_time=[];for(let e=0;e<2;e++)document.write("<div id= time"+e+"> </div>"),div_time[e]=document.getElementById("time"+e),defaultSet(div_time[e],screen),putXY(div_time[e],screenWidth-30,160),translate(div_time[e],Right,Top),textEdge(div_time[e],4,"#000000"),fontSet(div_time[e],"#FFFFFF","Higashi","60","bold","right"),div_time[e].style.zIndex=1e3,setText(div_time[e],"");putXY(div_time[1],puzzleWidth-40,puzzleHeight+360+30),textEdge(div_time[1],5,"#000000"),fontSet(div_time[1],"#FFFFFF","Higashi","100","bold","right");let timeOpacity=0;document.write("<div id= copyRight> </div>");const div_copyRight=document.getElementById("copyRight");function copyRight(e){return"Puzzle Maker: ©2024 RAMUNE SPARK"+e+'制作者・お問合せ先（Twitter）: <a href="https://twitter.com/RAMUNE_SPARK" target="_blank" style="color:yellow">@RAMUNE_SPARK</a>'}defaultSet(div_copyRight,screen),putXY(div_copyRight,0,screenHeight),translate(div_copyRight,Left,Bottom),fontSet(div_copyRight,"#FFFFFF","Higashi","31","normal","left"),div_copyRight.style.zIndex=1e4,setText(div_copyRight,""),document.write("<div id= copyRight2> </div>");const div_copyRight2=document.getElementById("copyRight2");function copyRight2(e){let t;return t="title"==mode?'ご利用の前に、<a href="https://github.com/RamuneSpark/puzzleMaker/blob/main/README.md" target="_blank" style="color:yellow">利用規程</a>を必ずご確認ください。':""}defaultSet(div_copyRight2,screen),putXY(div_copyRight2,screenWidth/2,screenHeight-100),translate(div_copyRight2,Center,Bottom),fontSet(div_copyRight2,"#FFFFFF","Higashi","45","normal","left"),div_copyRight2.style.zIndex=1e4,setText(div_copyRight2,"");const setY=puzzleHeight-360-350,defaultY=puzzleHeight-360-350+2*fps;let logo={y:defaultY-100,opacity:0,scaleY:100,scaleAY:0};document.write("<div id= logo> </div>");const div_logo=document.getElementById("logo");defaultSet(div_logo,screen),putXY(div_logo,puzzleWidth,puzzleHeight-360-300),translate(div_logo,Center,Center),div_logo.style.zIndex=1e4,setImage(div_logo,"");let sample={y:setY,opacity:0};document.write("<div id= sample> </div>");const div_sample=document.getElementById("sample");defaultSet(div_sample,screen),putXY(div_sample,puzzleWidth,sample.y),translate(div_sample,Center,Center),div_sample.style.zIndex=-10,setImage(div_sample,"");let div_rate=[];for(let e=0;e<3;e++)document.write("<div id= rate"+e+"> </div>"),div_rate[e]=document.getElementById("rate"+e),defaultSet(div_rate[e],screen),transform(div_rate[e],Center,Center,0,100),div_rate[e].style.zIndex=30,div_rate[e].style.mixBlendMode="normal",setImage(div_rate[e],"");putXY(div_rate[0],puzzleOrigin.x+50,puzzleHeight-360-275),transform(div_rate[0],Left,Center,0,100),putXY(div_rate[1],puzzleWidth-35,puzzleHeight-360-275),transform(div_rate[1],Center,Center,0,100),putXY(div_rate[2],puzzleWidth+480-50,puzzleHeight-360-275),transform(div_rate[2],Right,Center,0,100),document.write("<div id= navi> </div>");const div_navi=document.getElementById("navi"),div_ruleTitle=(defaultSet(div_navi,screen),putXY(div_navi,screenWidth/2,puzzleHeight+360+330),translate(div_navi,Center,Center),fontSet(div_navi,"#FFFFFF","Higashi","40","bold","left"),textEdge(div_navi,4,"#000000"),div_navi.style.zIndex=100,setText(div_navi,""),document.write("<div id= ruleTitle> </div>"),document.getElementById("ruleTitle")),div_ruleBack=(defaultSet(div_ruleTitle,screen),putXY(div_ruleTitle,screenWidth/2,60),translate(div_ruleTitle,Center,Top),fontSet(div_ruleTitle,"#FFFFFF","Higashi","75","bold","right"),textEdge(div_ruleTitle,5,"#000000"),div_ruleTitle.style.zIndex=1e4,setText(div_ruleTitle,""),document.write("<div id= ruleBack> </div>"),document.getElementById("ruleBack")),div_ruleText=(defaultSet(div_ruleBack,screen),putXY(div_ruleBack,"50%","50%"),translate(div_ruleBack,Center,Center),div_ruleBack.style.zIndex=-80,setImage(div_ruleBack,""),document.write("<div id= ruleText> </div>"),document.getElementById("ruleText")),div_ruleText2=(defaultSet(div_ruleText,div_ruleBack),putXY(div_ruleText,0,230),translate(div_ruleText,Left,Top),fontSet(div_ruleText,"#CCCCCC","Higashi","45","normal","left"),textEdge(div_ruleText,4,"#000000"),div_ruleText.style.zIndex=-79,setText(div_ruleText,""),document.write("<div id= ruleText2> </div>"),document.getElementById("ruleText2"));defaultSet(div_ruleText2,screen),putXY(div_ruleText2,screenWidth,screenHeight-10),translate(div_ruleText2,Right,Bottom),fontSet(div_ruleText2,"#CCCCCC","Higashi","45","normal","left"),textEdge(div_ruleText2,4,"#000000"),div_ruleText2.style.zIndex=100,setText(div_ruleText2,"");let buttonOpacity=1;document.write("<div id= startButton> </div>");const div_startButton=document.getElementById("startButton");defaultSet(div_startButton,screen),putXY(div_startButton,puzzleWidth,puzzleHeight+360+110),transform(div_startButton,Center,Center,0,100),div_startButton.style.zIndex=10,setImage(div_startButton,"");let mode="title",sinceMode="",blank={},startTimer=0,shuffle=0,shuffleTime=0;function start(){"title"==mode&&"image/puzzle0.png"!==puzzleSRC&&(nameChange=0,clearFitSound=0,loadSound(),shuffle=1,shuffleTime=0,movePanelMode=0,panelReset(),mode="set",puzzleSet(),(startTimer=0)==example?(blank.x=Math.floor(Math.random()*pSize),blank.y=Math.floor(Math.random()*pSize)):(blank.x=pSize-1,blank.y=pSize-1))}touch(div_startButton,start);let stage=0;document.write("<div id= stageButton> </div>");const div_stageButton=document.getElementById("stageButton");function stageChange(){2<++stage&&(stage=0)}defaultSet(div_stageButton,screen),putXY(div_stageButton,screenWidth/2,80),transform(div_stageButton,Center,Center,0,100),div_stageButton.style.zIndex=10,setImage(div_stageButton,""),touch(div_stageButton,stageChange),document.write("<div id= giveUpButton> </div>");const div_giveUpButton=document.getElementById("giveUpButton");defaultSet(div_giveUpButton,screen),putXY(div_giveUpButton,30,80),transform(div_giveUpButton,Left,Center,0,100),div_giveUpButton.style.zIndex=10,setImage(div_giveUpButton,""),touch(div_giveUpButton,giveUpGo);let giveUpOpacity=.2;function giveUpGo(){"game"!=mode&&"set"!=mode&&"complete2"!=mode||(giveYS_ButtonOpacity=0,giveUpDisOpacity=0,sinceMode=mode,mode="pause")}let giveYS_ButtonOpacity=0,div_giveYS_Button=[];for(let e=0;e<2;e++)document.write("<div id= div_giveYS_Button"+e+"> </div>"),div_giveYS_Button[e]=document.getElementById("div_giveYS_Button"+e),defaultSet(div_giveYS_Button[e],screen),putXY(div_giveYS_Button[e],30+40*e+"%",puzzleHeight+20),transform(div_giveYS_Button[e],Center,Center,0,100),div_giveYS_Button[e].style.zIndex=1e5,div_giveYS_Button[e].style.mixBlendMode="normal",setImage(div_giveYS_Button[e],"");for(let e=0;e<2;e++)touch(div_giveYS_Button[e],function(){giveUpSelect(e)});function giveUpSelect(e){1==giveYS_ButtonOpacity&&"pause"==mode&&(1==e?mode=sinceMode:0==e&&(mode="title",sinceMode="",blank.x=null,blank.y=null,panelsClear(),panelReset(),panelLocationSet(),setImage(div_puzzle,puzzleSRC),div_puzzle.style.width=960,div_puzzle.style.height=720,div_puzzle.getElementsByTagName("img")[0].width=960,div_puzzle.getElementsByTagName("img")[0].height=720))}document.write("<div id= sizeButton> </div>");const div_sizeButton=document.getElementById("sizeButton");function sizeChange(){"title"==mode&&5<++pSize&&(pSize=3)}defaultSet(div_sizeButton,screen),putXY(div_sizeButton,puzzleOrigin.x+50,puzzleHeight-360-110),transform(div_sizeButton,Left,Center,0,100),div_sizeButton.style.zIndex=10,setImage(div_sizeButton,""),touch(div_sizeButton,sizeChange),document.write("<div id= judgeButton> </div>");const div_judgeButton=document.getElementById("judgeButton");defaultSet(div_judgeButton,screen),putXY(div_judgeButton,puzzleWidth-35,puzzleHeight-360-110),transform(div_judgeButton,Center,Center,0,100),div_judgeButton.style.zIndex=10,setImage(div_judgeButton,"");let judge=1;function judgeChange(){"title"==mode&&(judge=1==judge?0:1)}touch(div_judgeButton,judgeChange),document.write("<div id= exampleButton> </div>");const div_exampleButton=document.getElementById("exampleButton");defaultSet(div_exampleButton,screen),putXY(div_exampleButton,puzzleWidth+480-50,puzzleHeight-360-110),transform(div_exampleButton,Right,Center,0,100),div_exampleButton.style.zIndex=10,setImage(div_exampleButton,"");let example=0;function exampleChange(){"title"==mode&&(example=1==example?0:1)}touch(div_exampleButton,exampleChange);let typeButtonOpacity=[],div_typeButton=[];for(let e=0;e<5;e++)typeButtonOpacity[e]=1,document.write("<div id= typeButton"+e+"> </div>"),div_typeButton[e]=document.getElementById("typeButton"+e),defaultSet(div_typeButton[e],screen),putXY(div_typeButton[e],screenWidth*(e+1)/6+15,puzzleHeight+360+280),transform(div_typeButton[e],Center,Center,0,100),div_typeButton[e].style.zIndex=10,div_typeButton[e].style.mixBlendMode="normal",setImage(div_typeButton[e],"");putXY(div_typeButton[0],+screenWidth/6-15,puzzleHeight+360+290);for(let e=0;e<5;e++)touch(div_typeButton[e],function(){typeChange(e)});let information=0,q;function typeChange(e){let t;"title"==mode&&(0!=e?(puzzleSRC=4==e?"image/puzzle"+e+".gif":"image/puzzle"+e+".png",typeButtonOpacity[e]=.1,q=e):(0==information&&0==cheatOK()||0!=information&&1==information&&(t=!0),t&&(setTimeout(()=>{loadImage()},300),typeButtonOpacity[e]=.1,information=1)))}information=1;let nextBlankLo={},movePanelMode=0,movePanelVec=0,movePanelDistance=0,movePanelType=[],movePanelSL=0;for(let t=0;t<5;t++)for(let e=0;e<5;e++)touch(div_panels[t][e],function(){0==shuffle&&panelMove(t,e)});function panelMove(e,t){if("game"==mode&&0==movePanelMode&&!(e==blank.y&&t==blank.x||idYXtoLoYX(e,t).y!=idYXtoLoYX(blank.y,blank.x).y&&idYXtoLoYX(e,t).x!=idYXtoLoYX(blank.y,blank.x).x)){movePanelSL=0,playSound("move",movePanelMode=1);var i=idYXtoLoYX(blank.y,blank.x),n=idYXtoLoYX(e,t);nextBlankLo=arrayCopy(n),movePanelVec=panelToBlankVec(i,n)[0],movePanelDistance=panelToBlankVec(i,n)[1],(movePanelType=[])[0]=[e,t];for(let e=1;e<movePanelDistance;e++)"left"==movePanelVec?movePanelType[e]=arrayCopy(panelLocation[n.y][n.x-e]):"right"==movePanelVec?movePanelType[e]=arrayCopy(panelLocation[n.y][n.x+e]):"up"==movePanelVec?movePanelType[e]=arrayCopy(panelLocation[n.y-e][n.x]):"down"==movePanelVec&&(movePanelType[e]=arrayCopy(panelLocation[n.y+e][n.x]))}}document.write("<div id= share> </div>");const div_share=document.getElementById("share");function normalShare(){setTimeout(()=>{shareContent("パズルメーカー | スライドパズルを作って遊べる！",shareURL)},300)}defaultSet(div_share,screen),putXY(div_share,screenWidth-30,30),transform(div_share,Right,Top,0,100),div_share.style.zIndex=1e3,setImage(div_share,""),touch(div_share,normalShare),document.write("<div id= taittsu> </div>");const div_taittsu=document.getElementById("taittsu"),div_twitter=(defaultSet(div_taittsu,screen),putXY(div_taittsu,screenWidth-30-100,30),transform(div_taittsu,Right,Top,0,100),div_taittsu.style.zIndex=1e3,setImage(div_taittsu,""),touch(div_taittsu,taittsuNormalShare),document.write("<div id= twitter> </div>"),document.getElementById("twitter")),div_twitterClear=(defaultSet(div_twitter,screen),putXY(div_twitter,screenWidth-30-210,30),transform(div_twitter,Right,Top,0,100),div_twitter.style.zIndex=1e3,setImage(div_twitter,""),touch(div_twitter,twitterNormalShare),document.write("<div id= twitterClear> </div>"),document.getElementById("twitterClear")),div_taittsuClear=(defaultSet(div_twitterClear,screen),putXY(div_twitterClear,-50+screenWidth-30-210,puzzleHeight+360+30),transform(div_twitterClear,Right,Top,0,100),div_twitterClear.style.zIndex=1e3,setImage(div_twitterClear,""),touch(div_twitterClear,twitterClearShare),document.write("<div id= taittsuClear> </div>"),document.getElementById("taittsuClear")),div_clearCopy=(defaultSet(div_taittsuClear,screen),putXY(div_taittsuClear,-50+screenWidth-30-100,puzzleHeight+360+30),transform(div_taittsuClear,Right,Top,0,100),div_taittsuClear.style.zIndex=1e3,setImage(div_taittsuClear,""),touch(div_taittsuClear,taittsuClearShare),document.write("<div id= clearCopy> </div>"),document.getElementById("clearCopy"));function copyShare(){"complete2"!=mode&&"complete2"!=sinceMode||copyText(recordShare2())}defaultSet(div_clearCopy,screen),putXY(div_clearCopy,-50+screenWidth-30,puzzleHeight+360+30),transform(div_clearCopy,Right,Top,0,100),div_clearCopy.style.zIndex=1e3,setImage(div_clearCopy,""),touch(div_clearCopy,copyShare),document.write("<div id= clearCardMake> </div>");const div_clearCardMake=document.getElementById("clearCardMake");defaultSet(div_clearCardMake,screen),putXY(div_clearCardMake,screenWidth/2,puzzleHeight+360+220),translate(div_clearCardMake,Center,Center),div_clearCardMake.style.zIndex=1e3,setImage(div_clearCardMake,""),touch(div_clearCardMake,clearCardMake);let clearCardOpacity=1,clearCardOpacityNoCh=0,name="",nameChange=0;function clearCardMake(){1!=clearCardOpacity||"complete2"!=mode&&"complete2"!=sinceMode||(clearCardOpacity=.2,clearCardOpacityNoCh=1,resizeCardImage(puzzleSRC),setTimeout(()=>{0==nameChange||""===name?Swal.fire({title:"ユーザーネーム入力",html:'<p style="text-align: left;">記録カードに表示するユーザーネームを入れてください。<br>※ユーザーネームを入力せずにカードを作成することも可能です。</p>',allowOutsideClick:!1,input:"text",inputValue:name,showCancelButton:!0,confirmButtonText:"決定",cancelButtonText:"キャンセル",confirmButtonColor:"#FF4274",cancelButtonColor:"#4ACEFB",showClass:{popup:`
      animate__animated
      animate__fadeInRight
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutLeft
      animate__faster
    `}}).then(e=>{e.isConfirmed&&e.value.length<=20?(name=e.value,createOpenToMakeCard(),nameChange=1):clearCardOpacityNoCh=(e.isConfirmed&&badMessageCenter("文字数エラー！","20文字以下で入力してください。"),0)}):createOpenToMakeCard()},300))}document.write("<div id= sound> </div>");const div_sound=document.getElementById("sound");defaultSet(div_sound,screen),putXY(div_sound,screenWidth/2-135,30),transform(div_sound,Right,Top,0,100),div_sound.style.zIndex=1e3,setImage(div_sound,""),touch(div_sound,soundChange);let soundOn=0;function soundChange(){"title"==mode&&"puzzle"==scene&&0===bs?2<++soundOn&&(soundOn=0):"title"!=mode&&"puzzle"==scene&&0===bs&&(1==soundOn?soundOn=2:2==soundOn&&(soundOn=1)),"title"!=mode&&loadSound()}function soundButtonOpacity(){return"title"!=mode&&0==soundOn?buttonOpacity:1}document.write("<div id= ruleExit> </div>");const div_ruleExit=document.getElementById("ruleExit");function ruleExit(){"rule"==scene&&0===bs&&(mode="title",nextScene="puzzle")}defaultSet(div_ruleExit,screen),putXY(div_ruleExit,screenWidth-30,30),transform(div_ruleExit,Right,Top,0,100),div_ruleExit.style.zIndex=1e3,setImage(div_ruleExit,""),touch(div_ruleExit,ruleExit);let skipX=screenWidth+270;document.write("<div id= skip> </div>");const div_skip=document.getElementById("skip");defaultSet(div_skip,screen),putXY(div_skip,skipX,puzzleOrigin.y-40),transform(div_skip,Right,Bottom,0,100),div_skip.style.zIndex=1e4,setImage(div_skip,""),touch(div_skip,skip);let skipMode=0;function skip(){if("set"==mode||"game"==mode&&1==shuffle){for(skipMode=1;;)if(move(),"game"==mode&&0==shuffle)break;startTime=performance.now(),skipMode=0}}function copyRightDisplay(){}function cheatOK(){return 3<=cheatMark?1:0}touch(div_copyRight,copyRightDisplay),touch(div_logo,function(){"title"==mode&&0==logo.scaleAY&&100==logo.scaleY&&4==pSize&&0==judge&&0==example&&(logo.scaleAY=-20,3==++cheatMark)&&goodMessage("隠し要素のアンロック","アニメーションgifが使用できるようになりました！<br>※1.6MB以上のgifは使用できません。")});let cheatMark=0,clearMark=0;function cheat(){logo.scaleY+=logo.scaleAY,logo.scaleY<=-100&&(logo.scaleY=-100,logo.scaleAY=10),100<=logo.scaleY&&(logo.scaleY=100,logo.scaleAY=0),transform2(div_logo,Center,Center,0,100,logo.scaleY)}let debug_message=[],div_debug=[];for(let e=0;e<=Player+1;e++)document.write("<div id= debug"+e+"> </div>"),div_debug[e]=document.getElementById("debug"+e),defaultSet(div_debug[e],screen),e==Player+1?(putXY(div_debug[e],0,"100%"),translate(div_debug[e],Left,Bottom)):0==e?(putXY(div_debug[e],"100%","100%"),translate(div_debug[e],Right,Bottom)):(putXY(div_debug[e],20*(e-1)+"%",20),translate(div_debug[e],Left,Top)),0==e?fontSet(div_debug[e],"#FFFFFF","Higashi","30","normal","right"):fontSet(div_debug[e],"#FFFFFF","Higashi","30","normal","left"),div_debug[e].style.zIndex=1e4,setText(div_debug[e],"");function debugMessage(){debug_message[0]="",debug_message[Player+1]="";for(let e=1;e<=Player;e++)debug_message[e]=""}function debug(){debugMessage();for(let e=0;e<=Player+1;e++)setText(div_debug[e],debug_message[e])}const preImageData=["stageButton0.png","stageButton1.png","stageButton2.png","sound0.png","sound1.png","sound2.png","sizeButton3Mini.png","sizeButton4Mini.png","sizeButton5Mini.png","judge0Mini.png","judge1Mini.png","example0Mini.png","example1Mini.png","0stage.png","1stage.png","2stage.png","skip.png"];let loadedImages=[];function preloadImages(){for(let e=0;e<preImageData.length;e++){var t=new Image;t.onload=function(){loadedImages.push(this)},t.src="image/"+preImageData[e]}}window.onload=function(){preloadImages()};let div_giveUpLoad=[];for(let e=0;e<3;e++)document.write("<div id= giveUpLoad"+e+"> </div>"),div_giveUpLoad[e]=document.getElementById("giveUpLoad"+e),defaultSet(div_giveUpLoad[e],screen),putXY(div_giveUpLoad[e],puzzleWidth,puzzleHeight),translate(div_giveUpLoad[e],Center,Center),div_giveUpLoad[e].style.zIndex=-1e8,div_giveUpLoad[e].style.opacity=0,setImage(div_giveUpLoad[e],"");function load(){if("set"==mode||"set"==sinceMode||"game"==mode||"game"==sinceMode){setImage(div_giveUpLoad[2],"image/giveup.png");for(let e=0;e<2;e++)setImage(div_giveUpLoad[e],"image/giveButton"+e+"Mini.png")}else if("complete2"==mode||"complete2"==sinceMode){setImage(div_giveUpLoad[2],"image/giveupClear.png");for(let e=0;e<2;e++)setImage(div_giveUpLoad[e],"image/giveButton"+e+"Mini.png")}else for(let e=0;e<3;e++)Remove(div_giveUpLoad[e])}async function getClearCard(){var e=document.createElement("canvas");const a=e.getContext("2d");e.width=1200,e.height=675;let t=q,l=["image/clearCard/bg.jpg","image/clearCard/puzzle"+(t=1<=q&&q<5?t:0)+".png","image/clearCard/logo.png","image/clearCard/sizeButton"+pSize+".png","image/clearCard/judge"+judge+".png","image/clearCard/example"+example+".png","image/clearCard/typeButton"+t+".png","image/clearCard/QR.png"];0==t&&createPuzzleImage&&(l[1]=cardImageSRC);const d=["C","C","C","L","L","L","C","L"],r=[{x:600,y:337.5},{x:270,y:260},{x:600,y:140},{x:560,y:340},{x:700,y:340},{x:920,y:340},{x:477,y:394},{x:950,y:182}];for(let o=0;o<l.length;o++)await new Promise((i,e)=>{const n=new Image;n.onload=function(){let e;"C"===d[o]?e=r[o].x-n.width/2:"L"===d[o]?e=r[o].x:"R"===d[o]&&(e=r[o].x-n.width);var t=r[o].y-n.height/2;a.drawImage(n,e,t,n.width,n.height),i()},n.onerror=e,n.src=l[o]});a.fillStyle="#FFFFFF",a.strokeStyle="#000000",a.lineWidth=6,a.lineJoin="round",a.font="bold 50px Higashi";var i=[timeDisplay2(),"で スライドパズルをクリアしました！"],i=(a.textAlign="right",a.textBaseline="top",a.fillText(i[0],470,510),a.strokeText(i[0],470,510),a.fillText(i[0],470,510),a.lineWidth=4,a.font="bold 30px Higashi",a.textAlign="left",a.fillText(i[1],500,530),a.strokeText(i[1],500,530),a.fillText(i[1],500,530),a.lineWidth=1,a.font="bold 35px Higashi",a.fillStyle="#000000",a.textAlign="right",a.textBaseline="bottom",""!==name&&a.fillText("ユーザー: "+name,1100,75),0==t&&createPuzzleImage&&(a.fillStyle="#FFFFFF",a.strokeStyle="#000000",a.lineWidth=3,a.font="bold 10px Higashi",a.textAlign="left",a.textBaseline="top",i[2]="※上の画像は、ユーザーによって選択されたものです。",a.fillText(i[2],55,400),a.strokeText(i[2],55,400),a.fillText(i[2],55,400),i[3]="※画像が元からラムネの著作物である場合を除き、ラムネがこの画像の著作権を取得することはありません。",a.fillText(i[3],55,415),a.strokeText(i[3],55,415),a.fillText(i[3],55,415),i[4]="※画像掲載に関する責任はすべてユーザーが負担しています。",a.fillText(i[4],55,430),a.strokeText(i[4],55,430),a.fillText(i[4],55,430),i[5]="　詳しくは、利用規程をご覧ください。 → https://github.com/RamuneSpark/puzzleMaker/blob/main/README.md",a.fillText(i[5],55,445),a.strokeText(i[5],55,445),a.fillText(i[5],55,445)),document.createElement("a"));i.download="puzzleMakerClearCard_"+date()+".jpg",i.href=e.toDataURL("image/jpeg",.92),i.click(),setTimeout(()=>{clearCardOpacityNoCh=0},3e3)}function date(){var e=new Date;return e.getFullYear()+("0"+(e.getMonth()+1)).slice(-2)+("0"+e.getDate()).slice(-2)+("0"+e.getHours()).slice(-2)+("0"+e.getMinutes()).slice(-2)+("0"+e.getSeconds()).slice(-2)}function resizeCardImage(e){const i=new Image;i.src=e,i.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),t=(e.width=403,e.height=302,t.drawImage(i,0,0,403,302),e.toDataURL("image/png",1));cardImageSRC=t}}let cardImageSRC,createPuzzleImage=!1;function createOpenToMakeCard(){1<=q&&q<5?getClearCard():""!==name?Swal.fire({title:"記録カード設定",html:'<p style="text-align: left;">利用規程に同意のもと、パズル画像を記録カードに掲載しますか？</p>',allowOutsideClick:!1,icon:"info",showCancelButton:!0,confirmButtonText:"掲載する",cancelButtonText:"掲載しない",confirmButtonColor:"#FF4274",cancelButtonColor:"#4ACEFB",showClass:{popup:`
      animate__animated
      animate__fadeInRight
      animate__faster
    `},hideClass:{popup:`
      animate__animated
      animate__fadeOutLeft
      animate__faster
    `}}).then(e=>{createPuzzleImage=!!e.isConfirmed,getClearCard()}):(createPuzzleImage=!1,getClearCard())}let clearFitSound=0,soundCh=[],context="A";function soundSRC(e){let t;return"fit"===e?t="data:audio/mpeg;base64,//sQxAAABJhjONQxgAClibG3DDACgABgAHEKhwMDN3+hwMDFoiJQ4GBm7/XAwN/6HAwMXAMDFvy4f2jjaSYjdktoAAAAAAAQMkC9xRMRRMhkBQ9YvGV/KhFiPDemOaBBpTbKKvq/N/P/+xLEAgAE/ElqGYeACK6HrfeYMAcs2azOxLbXl6h1kEIOzAUtABRjGBZKzP08+mlmZtarAsgUc/U7RKQSLuAAApYtCmAdT06XNnq05LShk9Njo1AQh+4UvhfDVZRRrTfzFSL8ajlQGTv/+xDEAgBFDHVfQCRh+J6IaLQWGG2AAAj5AaDQhIECZ6KFlNxK0hzQpHxAYnDTzads8lYy0b+gjuEBVsoFibAOJCoEiOGIThKTni8S1JdPaCRgCpIGLBZJU/Pxbxx0s3m9EJlacw5ThP/7EsQDg4UkRR4E4YOAjYhgSDEMgonNuu6JuK3J1q08vEAFQWa9Ny0cQpgbJpVLMssrWQ0sNfXgAYCAmZoYCUlQCAgIUGASZmoCoIBARIYCFAWJQF4iPf/7mIrAAkZWWWyyy///LJZQwP/7EMQHA8NATJAghGAgAAA0gAAABMEHCAqKioJhD6m/60xBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq":"move"===e&&(t="data:audio/mpeg;base64,//sQxAAABGhzLBQTAACtEuoDDrAA8gABIH/97/7Rd3d3d3ERGf9r0wEAAAIZYIQQGg+D4IAh6wfpH5XZAflcfhMn2w0Z9P8dmnsravAfLKDUuM3tWkd0KHMBMnlFJf/7+vZJ9RPhB6v/+xLEAgBFNItgvCQACJyOcLjzCR6oBq4AKMyZbP4lhxlhBUuJDOI47gZMi4TGUQkOLvfR82MutjOcSEM9MrKic1/1O/RBLlULwnHQAh6Q2Er2i3vOzI0zLt9G3N/HlHEokQuG3DllJgD/+xDEA4BFYC9v4CTAgJgM7vAEiD6AACyoUB0EyEJJsPZLmgoIbaCyAFUNcVBJGHEwWCB8QLOlvBoez/a1KtZAISIfRB2Kq9psrLt60toEa3I/WrOujF7QoNXTpbeCrxnNtogAQAUsif/7EsQEgAWUc1mAJGGIq4hr/AMMKHDQnIGY2jsmOsydSAJmR+DVKefGoDsysx8IHtceJDcCvr+SADwyvEMx1AXgAdliRiYbW7kg2wDbsNCa2L0Y0C60HRstU8r5IeYKhk25oSUCSS2xKP/7EMQCgAUIJV+ABMIwjg7lLBCNOLgBpzgNKt0oK51g4HjQNSoabtDvLEg6oPJUHIi6n1uFm6VkHQSkSRBEm5NFeTUz5+EmEmhBNMyfpNfJgoUI4zC3/X/QysshTEFNRTMuMTAwVVVV"),t}function playSound(t,i){if(2==soundOn&&0==skipMode){const n=(context="A"===context?new(window.AudioContext||window.webkitAudioContext):context).createBufferSource(),o=context.createGain(),e=new XMLHttpRequest;e.open("GET",soundSRC(t),!0),e.responseType="arraybuffer",e.onload=function(){context.decodeAudioData(e.response,function(e){n.buffer=e,n.loop=!1,n.connect(o),o.connect(context.destination),o.gain.value=vol(t)*i,n.start(0)})},e.send()}}function loadSound(){if(2==soundOn){var t=["fit","move"];for(let e=0;e<t.length;e++)playSound(t[e],0)}}function vol(e){let t;return t="fit"===e?.7:"move"===e?.4:.3,1===shuffle&&(t*=2/3),t}let speed=[50,170],shuffleLim=[0,1,2,100,150,230];function run(){if(load(),"puzzle"==scene&&"puzzle"==scene){if(0!==ri?orientAlertOpacity+=.1:orientAlertOpacity-=.1,orientAlertOpacity<=0?(orientAlertOpacity=0,Remove(div_orientAlert)):(1<=orientAlertOpacity&&(orientAlertOpacity=1),div_orientAlert.style.opacity=orientAlertOpacity,setImageHW(div_orientAlert,"image/orientAlert.jpg",screenHeight,screenWidth)),setText(div_copyRight,copyRight("<br>")),setText(div_copyRight2,copyRight2("<br>")),cheat(),setImageHW(div_share,"image/share.png",100,100),setImageHW(div_taittsu,"image/SNS/taittsu_icon.png",100,100),setImageHW(div_twitter,"image/SNS/twitter_icon.png",100,120),setImageHW(div_sound,"image/sound"+soundOn+".png",150,150),setImageHW(div_bg,"image/bg.jpg",screenHeight,screenWidth),setImageHW(div_startButton,"image/startButton.png",144,768),setImageHW(div_sizeButton,"image/sizeButton"+pSize+"Mini.png",108,180),setImageHW(div_stageButton,"image/stageButton"+stage+".png",108,180),setImageHW(div_judgeButton,"image/judge"+judge+"Mini.png",108,300),setImageHW(div_exampleButton,"image/example"+example+"Mini.png",108,252),"set"==mode||"game"==mode&&1==shuffle?((skipX-=80)<=puzzleWidth+480&&(skipX=puzzleWidth+480),setImageHW(div_skip,"image/skip.png",108,270)):(skipX+=80)>=screenWidth+270&&(skipX=screenWidth+270,Remove(div_skip)),putXY(div_skip,skipX,puzzleOrigin.y-40),setImageHW(div_stage,"image/"+stage+"stage.png",720,960),setImageHW(div_stage2,"image/stage2.png",740,980),0==example||"image/puzzle0.png"===puzzleSRC?(sample.opacity-=1/fps,sample.opacity<=0&&(sample.opacity=0,logo.y-=2,logo.y<=setY-100&&(logo.y=setY-100),logo.opacity+=1/fps)):1==example&&(logo.y+=2,logo.opacity-=1/fps,logo.opacity<=0&&(logo.opacity=0),logo.y>=defaultY-100)&&(logo.y=defaultY-100,sample.opacity+=1/fps),1<=logo.opacity&&(logo.opacity=1),1<=sample.opacity&&(sample.opacity=1),t%3!=1&&(putXY(div_logo,puzzleWidth,logo.y),div_logo.style.opacity=logo.opacity,div_sample.style.opacity=sample.opacity),logo.opacity<=0?Remove(div_logo):setImageHW(div_logo,"image/logoMini"+cheatOK()+".png",97,840),sample.opacity<=0?Remove(div_sample):setImageHW(div_sample,puzzleSRC,288,384),"game"==mode||"set"==mode||"complete2"==mode?1<=(giveUpOpacity+=50/fps*.1)&&(giveUpOpacity=1):(giveUpOpacity-=50/fps*.1)<=.2&&(giveUpOpacity=.2),div_giveUpButton.style.opacity=giveUpOpacity,setImageHW(div_giveUpButton,"image/giveUpButton.png",108,180),"title"==mode){1<=(buttonOpacity+=50/fps*.1)&&(buttonOpacity=1);for(let e=0;e<5;e++)typeButtonOpacity[e]+=50/fps*.04,1<=typeButtonOpacity[e]&&(typeButtonOpacity[e]=1),div_typeButton[e].style.opacity=typeButtonOpacity[e],0==e?setImageHW(div_typeButton[e],"image/typeButton"+e+"Mini.png",162,180):setImageHW(div_typeButton[e],"image/typeButton"+e+"Mini.png",180*.7,140);setImageHW(div_puzzle,puzzleSRC,720,960)}else if("set"==mode){for(let e=0;e<5;e++)typeButtonOpacity[e]-=50/fps*.1,typeButtonOpacity[e]<=0&&(typeButtonOpacity[e]=0),div_typeButton[e].style.opacity=typeButtonOpacity[e];Remove(div_puzzle),(buttonOpacity-=50/fps*.1)<=.2&&(buttonOpacity=.2),startTimer++,puzzleTime=0,startTimer>3*fps?(startTimer=0,mode="game"):startTimer>2.2*fps?div_panels[blank.y][blank.x].style.opacity=0:startTimer>.5*fps&&(startTimer%8<4?div_panels[blank.y][blank.x].style.opacity=0:div_panels[blank.y][blank.x].style.opacity=1),panelColorSet()}else if("game"==mode){if(0==shuffle&&(puzzleTime++,latestTime=performance.now()),div_panels[blank.y][blank.x].style.opacity=0,shuffleTime>=shuffleLim[pSize]&&0==movePanelMode&&check1()&&1==shuffle&&(shuffle=0,startTime=performance.now()),1==shuffle&&0==movePanelMode)for(;;){var e=Math.floor(Math.random()*pSize),i=Math.floor(Math.random()*pSize);if(!(i==blank.y&&e==blank.x||idYXtoLoYX(i,e).y!=idYXtoLoYX(blank.y,blank.x).y&&idYXtoLoYX(i,e).x!=idYXtoLoYX(blank.y,blank.x).x||vecRe(movePanelVec)==panelToBlankVec(idYXtoLoYX(blank.y,blank.x),idYXtoLoYX(i,e))[0]||movePanelVec==panelToBlankVec(idYXtoLoYX(blank.y,blank.x),idYXtoLoYX(i,e))[0]||1!=panelToBlankVec(idYXtoLoYX(blank.y,blank.x),idYXtoLoYX(i,e))[1])){panelMove(i,e),shuffleTime++;break}}if(1==movePanelMode){"left"==movePanelVec||"right"==movePanelVec?(movePanelSL+=speed[shuffle]*(50/fps))>=960/pSize&&(movePanelSL=960/pSize,movePanelMode=2):(movePanelSL+=.75*speed[shuffle]*(50/fps))>=720/pSize&&(movePanelSL=720/pSize,movePanelMode=2);for(let e=0;e<movePanelType.length;e++)"left"==movePanelVec?panels[movePanelType[e][0]][movePanelType[e][1]].x=puzzleOrigin.x+960*idYXtoLoYX(movePanelType[e][0],movePanelType[e][1]).x/pSize-movePanelSL:"right"==movePanelVec?panels[movePanelType[e][0]][movePanelType[e][1]].x=puzzleOrigin.x+960*idYXtoLoYX(movePanelType[e][0],movePanelType[e][1]).x/pSize+movePanelSL:"up"==movePanelVec?panels[movePanelType[e][0]][movePanelType[e][1]].y=puzzleOrigin.y+720*idYXtoLoYX(movePanelType[e][0],movePanelType[e][1]).y/pSize-movePanelSL:"down"==movePanelVec&&(panels[movePanelType[e][0]][movePanelType[e][1]].y=puzzleOrigin.y+720*idYXtoLoYX(movePanelType[e][0],movePanelType[e][1]).y/pSize+movePanelSL)}if(2==movePanelMode){panelLocation[nextBlankLo.y][nextBlankLo.x]=arrayCopy([blank.y,blank.x]);for(let e=0;e<movePanelType.length;e++)"left"==movePanelVec?panelLocation[nextBlankLo.y][nextBlankLo.x-(e+1)]=arrayCopy(movePanelType[e]):"right"==movePanelVec?panelLocation[nextBlankLo.y][nextBlankLo.x+(e+1)]=arrayCopy(movePanelType[e]):"up"==movePanelVec?panelLocation[nextBlankLo.y-(e+1)][nextBlankLo.x]=arrayCopy(movePanelType[e]):"down"==movePanelVec&&(panelLocation[nextBlankLo.y+(e+1)][nextBlankLo.x]=arrayCopy(movePanelType[e]));panelLocationSet(),movePanelMode=0,movePanelType=[],playSound("fit",1)}0==movePanelMode&&panelColorSet(),check2()&&0==movePanelMode&&0==shuffle&&(mode="clear")}else if("clear"==mode)startTimer++,div_panels[blank.y][blank.x].style.opacity=t%2,startTimer>=fps&&(startTimer=0,mode="complete",clear={x:1600},panelsClear(),timeOpacity=0,setImageHW(div_puzzle,puzzleSRC,720,960));else if("complete"==mode||"complete2"==mode){++startTimer>=1.5*fps&&(clear.x-=50/fps*80,clear.x<=puzzleWidth)&&(clear.x=puzzleWidth,0==clearFitSound&&(playSound("fit",1),clearFitSound=1),1<=(timeOpacity+=50/fps*.1))&&(timeOpacity=1,mode="complete2",victoryTime())&&5==pSize&&0==clearMark&&(goodMessage("5×5パズル 2分以内クリア　おめでとう！","[4×4][カラー判定なし][お手本なし]で、タイトルロゴを何度もクリック・タップすると…？"),clearMark=1),putXY(div_clear,clear.x,puzzleHeight),div_time[1].style.opacity=timeOpacity,setText(div_time[1],timeDisplay()),setImageHW(div_clear,"image/clear.png",1500,1030);for(let e=0;e<3;e++)div_rate[e].style.opacity=.35*timeOpacity;setImageHW(div_rate[0],"image/sizeButton"+pSize+"Mini.png",108,180),setImageHW(div_rate[1],"image/judge"+judge+"Mini.png",108,300),setImageHW(div_rate[2],"image/example"+example+"Mini.png",108,252),setImageHW(div_clearCopy,"image/copy.png",100,100),setImageHW(div_taittsuClear,"image/SNS/taittsu_icon.png",100,100),setImageHW(div_twitterClear,"image/SNS/twitter_icon.png",100,120),isHTTP()&&setImageHW(div_clearCardMake,"image/clearCardButton.png",126,740),setText(div_navi,Rb("左上","ひだりうえ")+"のホームボタンから"+Rb("再","さい")+"プレイできるよ！"),div_clearCopy.style.opacity=timeOpacity,div_taittsuClear.style.opacity=timeOpacity,div_twitterClear.style.opacity=timeOpacity,div_clearCardMake.style.opacity=timeOpacity*clearCardOpacity,div_navi.style.opacity=timeOpacity}else if("pause"==mode){1<=(giveUpDisOpacity+=.1)&&(giveUpDisOpacity=1,giveYS_ButtonOpacity+=.1),1<=giveYS_ButtonOpacity&&(giveYS_ButtonOpacity=1),div_giveUp.style.opacity=giveUpDisOpacity,"complete"==sinceMode||"complete2"==sinceMode?setImageHW(div_giveUp,"image/giveupClear.png",720,960):setImageHW(div_giveUp,"image/giveup.png",720,960),0==shuffle&&"game"==sinceMode&&(puzzleTime++,latestTime=performance.now());for(let e=0;e<2;e++)div_giveYS_Button[e].style.opacity=giveYS_ButtonOpacity,setImageHW(div_giveYS_Button[e],"image/giveButton"+e+"Mini.png",144,240)}if(0==clearCardOpacityNoCh&&(clearCardOpacity+=.05),1<=clearCardOpacity&&(clearCardOpacity=1),"complete"!=mode&&"complete2"!=mode&&"complete"!=sinceMode&&"complete2"!=sinceMode){if(clear.x-=80,clear.x<=-1e3&&(clear.x=-1e3,Remove(div_clear)),(timeOpacity-=.1)<=0){timeOpacity=0,Remove(div_time[1]);for(let e=0;e<3;e++)Remove(div_rate[e]);Remove(div_clearCopy),Remove(div_taittsuClear),Remove(div_twitterClear),Remove(div_clearCardMake),Remove(div_navi)}putXY(div_clear,clear.x,puzzleHeight),div_time[1].style.opacity=timeOpacity;for(let e=0;e<3;e++)div_rate[e].style.opacity=.35*timeOpacity;div_clearCopy.style.opacity=timeOpacity,div_taittsuClear.style.opacity=timeOpacity,div_twitterClear.style.opacity=timeOpacity,div_clearCardMake.style.opacity=timeOpacity,div_navi.style.opacity=timeOpacity}setText(div_time[0],timeDisplay());for(let t=0;t<5;t++)for(let e=0;e<5;e++)putXY(div_panels[t][e],panels[t][e].x,panels[t][e].y);if("image/puzzle0.png"===puzzleSRC?div_startButton.style.opacity=.2:div_startButton.style.opacity=buttonOpacity,div_sound.style.opacity=soundButtonOpacity(),div_sizeButton.style.opacity=buttonOpacity,div_judgeButton.style.opacity=buttonOpacity,div_exampleButton.style.opacity=buttonOpacity,"pause"!=mode){if(giveUpDisOpacity-=.1,giveYS_ButtonOpacity-=.1,giveUpDisOpacity<=0&&(giveUpDisOpacity=0,Remove(div_giveUp)),giveYS_ButtonOpacity<=0)for(let e=giveYS_ButtonOpacity=0;e<2;e++)Remove(div_giveYS_Button[e]);div_giveUp.style.opacity=giveUpDisOpacity;for(let e=0;e<2;e++)div_giveYS_Button[e].style.opacity=giveYS_ButtonOpacity}}}let puzzleSRC="image/puzzle0.png",pSize=3;function puzzleSet(){panelLocationSet();for(let t=0;t<5;t++)for(let e=0;e<5;e++)t<pSize&&e<pSize?(setImage(div_panels[t][e],"image/empty"+pSize+".png"),div_panels[t][e].appendChild(div_panelsFrame[t][e]),div_panels[t][e].appendChild(div_panelsArt[t][e]),setImage(div_panelsFrame[t][e],"image/frame"+pSize+".png"),setImageHW(div_panelsArt[t][e],puzzleSRC,720,960),Remove(div_sample),setImageHW(div_sample,puzzleSRC,288,384),putXY(div_panelsArt[t][e],-(960*e/pSize),-(720*t/pSize))):panels[t][e]={x:1200,y:0}}let panelLocation;function panelReset(){panelLocation=[[[0,0],[0,1],[0,2],[0,3],[0,4]],[[1,0],[1,1],[1,2],[1,3],[1,4]],[[2,0],[2,1],[2,2],[2,3],[2,4]],[[3,0],[3,1],[3,2],[3,3],[3,4]],[[4,0],[4,1],[4,2],[4,3],[4,4]]]}function panelLocationSet(){var i;for(let t=0;t<5;t++)for(let e=0;e<5;e++)t<pSize&&e<pSize&&(i=idYXtoLoYX(t,e),panels[t][e]={x:puzzleOrigin.x+960*i.x/pSize,y:puzzleOrigin.y+720*i.y/pSize})}function idYXtoLoYX(i,n){var o={};for(let t=0;t<pSize;t++)for(let e=0;e<pSize;e++)panelLocation[e][t][0]==i&&panelLocation[e][t][1]==n&&(o.x=t,o.y=e);return o}function panelToBlankVec(e,t){var i=[];return t.x==e.x?(t.y>e.y?i[0]="up":i[0]="down",i[1]=Math.abs(t.y-e.y)):t.y==e.y&&(t.x>e.x?i[0]="left":i[0]="right",i[1]=Math.abs(t.x-e.x)),i}function vecRe(e){let t;return"left"==e?t="right":"right"==e?t="left":"up"==e?t="down":"down"==e&&(t="up"),t}function check1(){let i=0,e=!1;for(let t=0;t<pSize;t++)for(let e=0;e<pSize;e++)panelLocation[e][t][0]===e&&panelLocation[e][t][1]===t&&i++;return 3==pSize?0==i&&(e=!0):4==pSize?i<=1&&(e=!0):5==pSize&&i<=2&&(e=!0),e}function check2(){let i=!0;for(let t=0;t<pSize;t++){for(let e=0;e<pSize;e++)if(panelLocation[e][t][0]!==e||panelLocation[e][t][1]!==t){i=!1;break}if(0==i)break}return i}function panelColorSet(){for(let t=0;t<pSize;t++)for(let e=0;e<pSize;e++)panelLocation[e][t][0]===e&&panelLocation[e][t][1]===t||0==judge?div_panelsArt[e][t].style.filter="grayscale(0%)":div_panelsArt[e][t].style.filter="grayscale(100%)"}function RemoveAll(){allDiv.forEach(e=>{Remove(e)})}window.addEventListener("touchstart",function(e){e.preventDefault()},{passive:!1}),window.oncontextmenu=function(e){return e.stopPropagation(),!1},document.onselectstart=function(){return!1};